<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>User Header</title>
    <link rel="stylesheet" th:href="@{/css/userHeader.css}">
</head>
<body>
<div th:fragment="header-content">
    <div class="header-container">
        <div class="logo">
            <img src="" alt="Jam Jam">
        </div>
        <div class="search-box">
            <input type="text">
            <button>검색</button>
        </div>
        <div class="nav-menu">
            <a href="/user/jobadList">채용정보</a>
            <a href="/user/positionUserList">포지션매치</a>
            <a href="/user/mypage">마이페이지</a>
        </div>
        <div class="user-actions" id="loginStatus">
            <!-- 로그인 상태에 따라 버튼 내용이 변경됩니다 -->
            <a href="/loginForm" id="loginButton">로그인</a>
        </div>
        
        <div class="user-actions" id="signup">
        	<a href="/joinForm">회원가입</a>
        </div>
        
    </div>
</div>
    <script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var loggedInUser = localStorage.getItem('username');
        var loginButton = document.getElementById('loginButton');
        var signupDiv = document.getElementById('signup');

        if (loggedInUser) {
            loginButton.innerText = '로그아웃';
            loginButton.href = '#'; // 로그아웃 링크 설정
            loginButton.onclick = function(e) {
                e.preventDefault(); // 링크 클릭 시 기본 동작 방지
                localStorage.removeItem('username');
                localStorage.removeItem('role');
                location.href = '/'; // 로그아웃 후 메인 페이지로 이동
            };
            signupDiv.style.display = 'none'; // 회원가입 버튼 숨기기
        } else {
            loginButton.innerText = '로그인';
            loginButton.href = '/loginForm'; // 로그인 링크 설정
        }
    });
    	
        function logout() {
    	    // 로컬 스토리지에서 해당하는 데이터 삭제
    	    localStorage.removeItem('username');
    	    localStorage.removeItem('role');
    	    
    	    alert('로그아웃 되었습니다.');
    	    // 로그아웃 후 서버로 로그아웃 요청을 보내는 등의 추가적인 서버 측 작업 수행 가능
    	  
    	    window.location.href = '/'; // 변경 필요
    	    
    	}
    	/*
    	var loggedInUser = /*[[${loggedInUser}]]*/ null;
       	/*
    	var loginButton = document.getElementById('loginStatus').querySelector('a');
        
        if (loggedInUser) {
            loginButton.innerText = '로그아웃';
            loginButton.href = '/logout'; // 로그아웃 링크 설정
            loginButton.onclick = function(e) {
                e.preventDefault(); // 링크 클릭 시 기본 동작 방지
                localStorage.removeItem('username');
                localStorage.removeItem('role');
                
                location.href = '/'; // 로그아웃 후 메인 페이지로 이동
            };
        } else {
            loginButton.innerText = '로그인';
            loginButton.href = '/loginForm'; // 로그인 링크 설정
        }
        */
        
    </script>
</body>
</html>
