<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.7.1.js"
	integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
	crossorigin="anonymous"></script>
</head>
<body>

	<h1>기업 마이페이지</h1>
	<hr>
	<h3>기업 정보조회</h3>
		<table border="1">
			<thead>
				<tr>
					<th>기업명</th>
					<th>로고</th>
					<th>대표자명</th>
					<th>기업주소</th>
					<th>사원수</th>
					<th>기업규모</th>
					<th>주요사업</th>
					<th>연매출액</th>
					<th>업종</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td th:text="${cname}"></td>
					<td><img th:src="@{/images/하이브 로고.png}" alt="기업로고" width="400" height="200"></td>
					<td th:text="${ceo}"></td>
					<td th:text="${caddr}"></td>
					<td th:text="${employees}"></td>
					<td th:text="${size}"></td>
					<td th:text="${major}"></td>
					<td th:text="${yrSales}"></td>
					<td th:text="${sector}"></td>
				</tr>
			</tbody>
		</table>
		<input type="submit" value="기업 정보 수정하기" onclick="updateComp(event)"> 
	<script>
		// cMyPage에서 쿼리 파라미터를 읽는 예제
		function updateComp(event){
			
			event.preventDefault();
			alert("기업 정소 수정페이지로 이동!");
			
			$.ajax({
			
				type : "GET",
				url : "http://localhost:9002/com/getCompanyInfo",
				success : function(data) {

					console.log(data);
					
					let queryString = `?username=${encodeURIComponent(data.username)}&cname=${encodeURIComponent(data.cname)}&ceo=${encodeURIComponent(data.ceo)}&caddr=${encodeURIComponent(data.caddr)}&cnum=${encodeURIComponent(data.cnum)}&employees=${encodeURIComponent(data.employees)}&logo=${encodeURIComponent(data.logo)}&major=${encodeURIComponent(data.major)}&sector=${encodeURIComponent(data.sector)}&size=${encodeURIComponent(data.size)}&yrSales=${encodeURIComponent(data.yrSales)}`;
					window.location.href = `http://localhost:8094/com/myPage${queryString}`;

				},
				error : function(){
					
					console.log("에러 발생....");
				}

			});
			
			
			
			
			
			
		}
	</script>
</body>
</html>